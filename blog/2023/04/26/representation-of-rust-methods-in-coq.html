<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Formal Land RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Formal Land Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MQLHF4EV4J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MQLHF4EV4J",{anonymize_ip:!0})</script><title data-react-helmet="true">Representation of Rust methods in Coq | Formal Land</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://formal.land/img/land-512.png"><meta data-react-helmet="true" name="twitter:image" content="https://formal.land/img/land-512.png"><meta data-react-helmet="true" property="og:url" content="https://formal.land/blog/2023/04/26/representation-of-rust-methods-in-coq"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Representation of Rust methods in Coq | Formal Land"><meta data-react-helmet="true" name="description" content="With our project coq-of-rust we aim to translate high-level Rust code to similar-looking Coq code, to formally verify Rust programs. One of the important constructs in the Rust language is the method syntax. In this post, we present our technique to translate Rust methods using type-classes in Coq."><meta data-react-helmet="true" property="og:description" content="With our project coq-of-rust we aim to translate high-level Rust code to similar-looking Coq code, to formally verify Rust programs. One of the important constructs in the Rust language is the method syntax. In this post, we present our technique to translate Rust methods using type-classes in Coq."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2023-04-26T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="coq-of-rust,Rust,Coq"><link data-react-helmet="true" rel="icon" href="/img/land-512.png"><link data-react-helmet="true" rel="canonical" href="https://formal.land/blog/2023/04/26/representation-of-rust-methods-in-coq"><link data-react-helmet="true" rel="alternate" href="https://formal.land/blog/2023/04/26/representation-of-rust-methods-in-coq" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://formal.land/blog/2023/04/26/representation-of-rust-methods-in-coq" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.cc776f64.css">
<link rel="preload" href="/assets/js/runtime~main.4faff57c.js" as="script">
<link rel="preload" href="/assets/js/main.c7bb9947.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarContent_3EUC">For formal verification services or advice, contact us at <a href="mailto:&#099;&#111;&#110;&#116;&#097;&#099;&#116;&#064;formal&#046;&#108;&#097;&#110;&#100;">&#099;&#111;&#110;&#116;&#097;&#099;&#116;&#064;formal&#046;&#108;&#097;&#110;&#100;</a>!</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/land-512.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/land-512.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Formal Land</b></a><a class="navbar__item navbar__link" href="/docs/company/about">Company</a><a class="navbar__item navbar__link" href="/docs/verification/ocaml">Formal verification</a><a class="navbar__item navbar__link" href="/docs/services/solidity-development">Services</a><a class="navbar__item navbar__link" href="/docs/coq-of-ocaml/introduction">coq-of-ocaml</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/formal-land" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://gitlab.com/formal-land" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/11/08/rust-thir-and-bundled-traits">Optimizing Rust translation to Coq with THIR and bundled traits</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/08/25/trait-representation-in-coq">Trait representation in Coq</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/05/28/monad-for-side-effects-in-rust">Monad for side effects in Rust</a></li><li class="sidebarItem_2UVv"><a aria-current="page" class="sidebarItemLink_1RT6 sidebarItemLinkActive_12pM" href="/blog/2023/04/26/representation-of-rust-methods-in-coq">Representation of Rust methods in Coq</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/01/24/current-verification-efforts">Current formal verification efforts üí™</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Representation of Rust methods in Coq</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2023-04-26T00:00:00.000Z" itemprop="datePublished">April 26, 2023</time> ¬∑ <!-- -->5 min read</div></header><div class="markdown" itemprop="articleBody"><p>With our project <a href="https://github.com/formal-land/coq-of-rust" target="_blank" rel="noopener noreferrer">coq-of-rust</a> we aim to translate high-level Rust code to similar-looking <a href="https://coq.inria.fr/" target="_blank" rel="noopener noreferrer">Coq</a> code, to <a href="https://en.wikipedia.org/wiki/Formal_verification" target="_blank" rel="noopener noreferrer">formally verify</a> Rust programs. One of the important constructs in the Rust language is the <a href="https://doc.rust-lang.org/book/ch05-03-method-syntax.html" target="_blank" rel="noopener noreferrer">method syntax</a>. In this post, we present our technique to translate Rust methods using type-classes in Coq.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="rust-code-to-translate">Rust Code To Translate<a class="hash-link" href="#rust-code-to-translate" title="Direct link to heading">‚Äã</a></h2><p>Consider the following Rust example, which contains a method (adapted from the <a href="https://doc.rust-lang.org/book/" target="_blank" rel="noopener noreferrer">Rust Book</a>):</p><div class="codeBlockContainer_K1bP language-rust theme-code-block"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">struct Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    width: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    height: u32,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">impl Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Here &quot;area&quot; is a method</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    fn area(&amp;self) -&gt; u32 {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        self.width * self.height</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fn main() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    let rect1 = Rectangle {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        width: 30,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        height: 50,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    println!(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;The area of the rectangle is {} square pixels.&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // We are calling this method there</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        rect1.area()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The Rust compiler can find the implementation of the <code>.area()</code> method call because it knows that the type of <code>rect1</code> is <code>Rectangle</code>. There could be other <code>area</code> methods defined for different types, and the code would still compile calling the <code>area</code> method of <code>Rectangle</code>.</p><p>Coq has no direct equivalent for calling a function based on its name and type.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="our-translation">Our Translation<a class="hash-link" href="#our-translation" title="Direct link to heading">‚Äã</a></h2><p>Here is our Coq translation of the code above:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> 1: (* Generated by coq-of-rust *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 2: Require Import CoqOfRust.CoqOfRust.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 3:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 4: Import Root.std.prelude.rust_2015.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 5:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 6: Module Rectangle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 7:   Record t : Set := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 8:     width : u32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 9:     height : u32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">10:   }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">11:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">12:   Global Instance Get_width : Notation.Dot &quot;width&quot; := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">13:     Notation.dot &#x27;(Build_t x0 _) := x0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">14:   }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">15:   Global Instance Get_height : Notation.Dot &quot;height&quot; := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">16:     Notation.dot &#x27;(Build_t _ x1) := x1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">17:   }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">18: End Rectangle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">19: Definition Rectangle : Set := Rectangle.t.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">20:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">21: Module ImplRectangle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">22:   Definition Self := Rectangle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">23:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">24:   Definition area (self : ref Self) : u32 :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">25:     self.[&quot;width&quot;].[&quot;mul&quot;] self.[&quot;height&quot;].</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">26:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">27:   Global Instance Method_area : Notation.Dot &quot;area&quot; := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">28:     Notation.dot := area;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">29:   }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30: End ImplRectangle.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">31:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">32: Definition main (_ : unit) : unit :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">33:   let rect1 := {| Rectangle.width := 30; Rectangle.height := 50; |} in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">34:   _crate.io._print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">35:     (_crate.fmt.Arguments::[&quot;new_v1&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">36:       [ &quot;The area of the rectangle is &quot;; &quot; square pixels.\n&quot; ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">37:       [ _crate.fmt.ArgumentV1::[&quot;new_display&quot;] rect1.[&quot;area&quot;] ]) ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">38:   tt ;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">39:   tt.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>On line <code>24</code> we define the <code>area</code> function. On line <code>27</code> we declare that <code>area</code> is a method. On line <code>37</code> we call the <code>area</code> method on <code>rect1</code> with:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">rect1.[&quot;area&quot;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>which closely resembles the source Rust code:</p><div class="codeBlockContainer_K1bP language-rust theme-code-block"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">rect1.area()</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Coq can automatically find the code of the <code>area</code> method to call.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-it-works">How It Works<a class="hash-link" href="#how-it-works" title="Direct link to heading">‚Äã</a></h2><p>The code:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">rect1.[&quot;area&quot;]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>is actually a notation for:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Notation.dot &quot;area&quot; rect1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Then we leverage the inference mechanism of type-classes in Coq to find the code of the <code>area</code> method:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Module Notation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (** A class to represent the notation [e1.e2]. This is mainly used to call</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      methods, or access to named or indexed fields of structures.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      The kind is either a string or an integer. *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Class Dot {Kind : Set} (name : Kind) {T : Set} : Set := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dot : T;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments dot {Kind} name {T Dot}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Notation.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>The <code>Dot</code> class has three parameters: <code>Kind</code>, <code>name</code>, and <code>T</code>. <code>Kind</code> is the type of the name of the method (generally a string but it could be an integer in rare cases), <code>name</code> is the name of the method, and <code>T</code> is the type of the method. The <code>dot</code> field of the class is the code of the method.</p><p>When we define the class instance:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">27:   Global Instance Method_area : Notation.Dot &quot;area&quot; := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">28:     Notation.dot := area;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">29:   }.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>we instantiate the class <code>Notation.Dot</code> with three parameters:</p><ul><li><code>Kind</code> (inferred) is <code>string</code> because the name of the method is a string,</li><li><code>name</code> is <code>&quot;area&quot;</code> because the name of the method is <code>area</code>,</li><li><code>T</code> (inferred) is <code>ref Rectangle -&gt; u32</code> because the method is declared as <code>fn area(&amp;self) -&gt; u32</code>.</li></ul><p>Then we define the <code>dot</code> field of the class instance to be the <code>area</code> function.</p><p>When we call:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Notation.dot &quot;area&quot; rect1</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Coq will automatically find the class instance <code>Method_area</code> because the type of <code>rect1</code> is <code>Rectangle</code> and the name of the method is <code>&quot;area&quot;</code>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="other-use-cases">Other Use Cases<a class="hash-link" href="#other-use-cases" title="Direct link to heading">‚Äã</a></h2><p>The <code>Dot</code> class is also used to access to named or indexed fields of structures or traits. We use a similar mechanism for associated functions. For example, the Rust code:</p><div class="codeBlockContainer_K1bP language-rust theme-code-block"><div class="codeBlockContent_hGly rust"><pre tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let rect1 = Rectangle::square(3);</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>is translated to:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let rect1 := Rectangle::[&quot;square&quot;] 3 in</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>with a type-class for the <code>type::[name]</code> notation as follows:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Module Notation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  (** A class to represent associated functions (the notation [e1::e2]). The</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      kind might be [Set] for functions associated to a type,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      or [Set -&gt; Set] for functions associated to a trait. *)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Class DoubleColon {Kind : Type} (type : Kind) (name : string) {T : Set} :</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Set := {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    double_colon : T;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments double_colon {Kind} type name {T DoubleColon}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Notation.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="in-conclusion">In Conclusion<a class="hash-link" href="#in-conclusion" title="Direct link to heading">‚Äã</a></h2><p>The type-classes mechanism of Coq appears flexible enough to represent our current use cases involving methods and associated functions. It remains to be seen whether this approach will suffice for future use cases.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Contact</h5></div><div class="admonition-content"><p>If you have a Rust codebase that you wish to formally verify, or need advice in your work, contact us at<!-- -->¬†<a href="mailto:contact@formal.land" target="_blank" rel="noopener noreferrer">c<!-- -->o<!-- -->n<!-- -->t<!-- -->a<!-- -->c<!-- -->t<!-- -->@<!-- -->formal<!-- -->.<!-- -->l<!-- -->a<!-- -->n<!-- -->d</a>. We will be happy to set up a call with you.</p></div></div></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/coq-of-rust">coq-of-rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/rust">Rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/coq">Coq</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2023/05/28/monad-for-side-effects-in-rust"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ <!-- -->Monad for side effects in Rust</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2023/01/24/current-verification-efforts"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Current formal verification efforts üí™<!-- --> ¬ª</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#rust-code-to-translate" class="table-of-contents__link toc-highlight">Rust Code To Translate</a></li><li><a href="#our-translation" class="table-of-contents__link toc-highlight">Our Translation</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How It Works</a></li><li><a href="#other-use-cases" class="table-of-contents__link toc-highlight">Other Use Cases</a></li><li><a href="#in-conclusion" class="table-of-contents__link toc-highlight">In Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Content</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/company/about">Company</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/company/claims">Claims</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/company/press">Press</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/LandFoobar" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://fr.linkedin.com/company/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/formal_land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.tiktok.com/@formal.land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>TikTok<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:contact@formal.land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitlab.com/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://formal-land.gitlab.io/coq-tezos-of-ocaml/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Coq Tezos of OCaml<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2023 Formal Land (Arae SARL) üê¶, Paris<br><em>Unbreakable safety with formal verification üèá</em><!-- Start of LiveChat (www.livechat.com) code -->
<script>window.__lc=window.__lc||{},window.__lc.license=14938650,function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice)</script>
<noscript><a href="https://www.livechat.com/chat-with/14938650/" rel="nofollow">Chat with us</a>, powered by <a href="https://www.livechat.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a></noscript>
<!-- End of LiveChat code --></div></div></div></footer></div>
<script src="/assets/js/runtime~main.4faff57c.js"></script>
<script src="/assets/js/main.c7bb9947.js"></script>
</body>
</html>