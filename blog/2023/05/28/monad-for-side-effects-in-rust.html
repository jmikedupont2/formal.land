<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Formal Land RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Formal Land Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MQLHF4EV4J"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-MQLHF4EV4J",{anonymize_ip:!0})</script><title data-react-helmet="true">Monad for side effects in Rust | Formal Land</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://formal.land/img/land-512.png"><meta data-react-helmet="true" name="twitter:image" content="https://formal.land/img/land-512.png"><meta data-react-helmet="true" property="og:url" content="https://formal.land/blog/2023/05/28/monad-for-side-effects-in-rust"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><meta data-react-helmet="true" property="og:title" content="Monad for side effects in Rust | Formal Land"><meta data-react-helmet="true" name="description" content="To formally verify Rust programs, we are building coq-of-rust, a translator from Rust&amp;nbsp;ü¶Ä code to the proof system Coq&amp;nbsp;üêì. We generate Coq code that is as similar as possible to the original Rust code, so that the user can easily understand the generated code and write proofs about it. In this blog post, we explain how we are representing side effects in Coq."><meta data-react-helmet="true" property="og:description" content="To formally verify Rust programs, we are building coq-of-rust, a translator from Rust&amp;nbsp;ü¶Ä code to the proof system Coq&amp;nbsp;üêì. We generate Coq code that is as similar as possible to the original Rust code, so that the user can easily understand the generated code and write proofs about it. In this blog post, we explain how we are representing side effects in Coq."><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="article:published_time" content="2023-05-28T00:00:00.000Z"><meta data-react-helmet="true" property="article:tag" content="coq-of-rust,Rust,Coq,monad,side effects"><link data-react-helmet="true" rel="icon" href="/img/land-512.png"><link data-react-helmet="true" rel="canonical" href="https://formal.land/blog/2023/05/28/monad-for-side-effects-in-rust"><link data-react-helmet="true" rel="alternate" href="https://formal.land/blog/2023/05/28/monad-for-side-effects-in-rust" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://formal.land/blog/2023/05/28/monad-for-side-effects-in-rust" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.20dc303f.css">
<link rel="preload" href="/assets/js/runtime~main.b3bf84ab.js" as="script">
<link rel="preload" href="/assets/js/main.d84506b2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><div class="announcementBar_3WsW" style="background-color:#fafbfc;color:#091E42" role="banner"><div class="announcementBarContent_3EUC">For formal verification services, email us at <a href="mailto:&#099;&#111;&#110;&#116;&#097;&#099;&#116;&#064;formal&#046;&#108;&#097;&#110;&#100;">&#099;&#111;&#110;&#116;&#097;&#099;&#116;&#064;formal&#046;&#108;&#097;&#110;&#100;</a>! (Rust, OCaml)</div></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/land-512.png" alt="Logo" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/img/land-512.png" alt="Logo" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">Formal Land</b></a><a class="navbar__item navbar__link" href="/docs/company/about">Company</a><a class="navbar__item navbar__link" href="/docs/verification/ocaml">Formal verification</a><a class="navbar__item navbar__link" href="/docs/services/solidity-development">Services</a><a class="navbar__item navbar__link" href="/docs/coq-of-ocaml/introduction">coq-of-ocaml</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/formal-land" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://gitlab.com/formal-land" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">Recent posts</div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2024/01/18/update-coq-of-rust">Upgrade the Rust version of coq-of-rust</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2024/01/04/rust-translating-match">Translating Rust match patterns to Coq with coq-of-rust</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/12/13/rust-verify-erc-20-smart-contract">Verifying an ERC-20 smart contract in Rust</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/11/26/rust-function-body">Translation of function bodies from Rust to Coq</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/blog/2023/11/08/rust-thir-and-bundled-traits">Optimizing Rust translation to Coq with THIR and bundled traits</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_GeHD" itemprop="headline">Monad for side effects in Rust</h1><div class="blogPostData_291c margin-vert--md"><time datetime="2023-05-28T00:00:00.000Z" itemprop="datePublished">May 28, 2023</time> ¬∑ <!-- -->6 min read</div></header><div class="markdown" itemprop="articleBody"><p>To formally verify Rust programs, we are building <a href="https://github.com/formal-land/coq-of-rust" target="_blank" rel="noopener noreferrer">coq-of-rust</a>, a translator from Rust<!-- -->¬†<!-- -->ü¶Ä code to the proof system <a href="https://coq.inria.fr/" target="_blank" rel="noopener noreferrer">Coq<!-- -->¬†<!-- -->üêì</a>. We generate Coq code that is as similar as possible to the original Rust code, so that the user can easily understand the generated code and write proofs about it. In this blog post, we explain how we are representing side effects in Coq.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="-side-effects-in-rust">ü¶Ä Side effects in Rust<a class="hash-link" href="#-side-effects-in-rust" title="Direct link to heading">‚Äã</a></h2><p>In programming, <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)" target="_blank" rel="noopener noreferrer">side effects</a> are all what is not representable by pure functions (mathematical functions, functions that always return the same output for given input parameters). In Rust there are various kinds of side effects:</p><ul><li>errors (the <a href="https://doc.rust-lang.org/core/macro.panic.html" target="_blank" rel="noopener noreferrer">panic!</a> macro) that propagate and do appear in the return type of functions,</li><li>non-termination, with some potentially non-terminating loops (never returning a result is considered as a side-effect),</li><li>control-flow, with the <code>break</code>, <code>continue</code>, <code>return</code> keywords, that can jump to a different part of the code,</li><li>memory allocations and memory mutations,</li><li>I/O, with for example the <a href="https://doc.rust-lang.org/std/macro.println.html" target="_blank" rel="noopener noreferrer">println!</a> macro, that prints a message to the standard output,</li><li>concurrency, with the <a href="https://doc.rust-lang.org/std/thread/fn.spawn.html" target="_blank" rel="noopener noreferrer">thread::spawn</a> function, that creates a new thread.</li></ul><h2 class="anchor anchorWithStickyNavbar_31ik" id="-coq-a-purely-functional-language">üêì Coq, a purely functional language<a class="hash-link" href="#-coq-a-purely-functional-language" title="Direct link to heading">‚Äã</a></h2><p>Like most proof systems, Coq is a purely functional language. This means we need to find an encoding for the side effects. The reason for most proof systems to forbid side effects is to be logically consistent. Otherwise, it would be easy to write a proof of <code>False</code> by writing a term that does not terminate for example.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="monads-in-coq">üîÆ<!-- -->¬†<!-- -->Monads in Coq<a class="hash-link" href="#monads-in-coq" title="Direct link to heading">‚Äã</a></h2><p>Monads are a common way to represent side effects in a functional language. A monad is a type constructor <code>M</code>:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition M (A : Set) : Set :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>representing computations returning values of type <code>A</code>. As an example we can take the error monad of computations that can fail with an error message, using the <a href="https://doc.rust-lang.org/std/result/enum.Result.html" target="_blank" rel="noopener noreferrer">Result</a> type like in Rust:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition M (A : Set) : Set :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Result A string.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It must have two operators, <code>Pure</code> and <code>Bind</code>.</p><h3 class="anchor anchorWithStickyNavbar_31ik" id="the-pure-operator">The <code>Pure</code> operator<a class="hash-link" href="#the-pure-operator" title="Direct link to heading">‚Äã</a></h3><p>The <code>Pure</code> operator has type:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition Pure {A : Set} (v : A) : M A :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It lifts a pure value <code>v</code> into the monad. For our error monad, the <code>Pure</code> operator is:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition Pure {A : Set} (v : A) : M A :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Ok v.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3 class="anchor anchorWithStickyNavbar_31ik" id="the-bind-operator">The <code>Bind</code> operator<a class="hash-link" href="#the-bind-operator" title="Direct link to heading">‚Äã</a></h3><p>The <code>Bind</code> operator has type:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition Bind {A B : Set} (e1 : M A) (f : A -&gt; M B) : M B :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>It sequences two computations <code>e1</code> with <code>f</code>, where <code>f</code> is a function that takes the result of <code>e1</code> as input and returns a new computation. We also note the <code>Bind</code> operator:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">let* x := e1 in</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">e2</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>assuming that <code>f</code> is a function that takes <code>x</code> as input and returns <code>e2</code>. Requiring this operator for all monads shows that sequencing computations is a very fundamental operation for side effects.</p><p>For our error monad, the <code>Bind</code> operator is:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition Bind {A B : Set} (e1 : M A) (f : A -&gt; M B) : M B :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  match e1 with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Ok v =&gt; f v</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Err msg =&gt; Err msg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  end.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_31ik" id="-state-exceptions-non-termination-control-flow">üöß State, exceptions, non-termination, control-flow<a class="hash-link" href="#-state-exceptions-non-termination-control-flow" title="Direct link to heading">‚Äã</a></h2><p>We use a single monad to represent all the side effects that interest us in Rust. This monad is called<!-- -->¬†<code>M</code> and is defined as follows:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition RawMonad `{State.Trait} :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Module Exception.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inductive t (R : Set) : Set :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Return : R -&gt; t R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Continue : t R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Break : t R</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  | Panic {A : Set} : A -&gt; t R.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments Return {_}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments Continue {_}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments Break {_}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Arguments Panic {_ _}.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">End Exception.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Definition Exception := Exception.t.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Definition Monad `{State.Trait} (R A : Set) : Set :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  nat -&gt; State -&gt; RawMonad ((A + Exception R) * State).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Definition M `{State.Trait} (A : Set) : Set :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Monad Empty_set A.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We assume the definition of some <code>RawMonad</code> for memory handling that we will describe in a later post. Our monad<!-- -->¬†<code>M</code> is a particular case of the monad<!-- -->¬†<code>Monad</code> with <code>R = Empty_set</code>. It is a combination four monads:</p><ol><li>The <code>RawMonad</code>.</li><li>A state monad, that takes a <code>State</code> as input and a return an updated state as output. The trait <code>State.Trait</code> provides read/write operations on the <code>State</code> type.</li><li>An error monad with errors of type <code>Exception R</code>. There errors include the <code>Return</code>, <code>Continue</code>, <code>Break</code> and <code>Panic</code> constructors. The <code>Return</code> constructor is used to return a value from a function. The <code>Continue</code> constructor is used to continue the execution of a loop. The <code>Break</code> constructor is used to break the execution of a loop. The <code>Panic</code> constructor is used to panic with an error message. We implement all these operations as exceptions, even if only <code>Panic</code> is really an error, as they behave in the same way: interrupting the execution of the current sub-expression to bubble up to a certain level.</li><li>A fuel monad for non-termination, with the additional <code>nat</code> parameter.</li></ol><p>The parameter <code>R</code> of the type constructor <code>Monad</code> is used to represent the type of values that can be returned in the body of a function. It is the same as the return type of the function. So for a function returning a value of type <code>A</code>, we define its body in <code>Monad A A</code>. Then, we wrap it in an operator:</p><div class="codeBlockContainer_K1bP language-coq theme-code-block"><div class="codeBlockContent_hGly coq"><pre tabindex="0" class="prism-code language-coq codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Definition catch_return {A : Set} (e : Monad A A) : M A :=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>that catches the <code>Return</code> exceptions and returns the value.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">‚Äã</a></h2><p>We will see in the next post how we define the <code>RawMonad</code> to handle the Rust state of a program and memory allocation.</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Contact</h5></div><div class="admonition-content"><p>If you have a Rust codebase that you wish to formally verify, or need advice in your work, contact us at<!-- -->¬†<a href="mailto:contact@formal.land" target="_blank" rel="noopener noreferrer">c<!-- -->o<!-- -->n<!-- -->t<!-- -->a<!-- -->c<!-- -->t<!-- -->@<!-- -->formal<!-- -->.<!-- -->l<!-- -->a<!-- -->n<!-- -->d</a>. We will be happy to set up a call with you.</p></div></div></div><footer class="row docusaurus-mt-lg blogPostDetailsFull_3kfx"><div class="col"><b>Tags:</b><ul class="tags_2ga9 padding--none margin-left--sm"><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/coq-of-rust">coq-of-rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/rust">Rust</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/coq">Coq</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/monad">monad</a></li><li class="tag_11ep"><a class="tag_1Okp tagRegular_3MiF" href="/blog/tags/side-effects">side effects</a></li></ul></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2023/08/25/trait-representation-in-coq"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ <!-- -->Trait representation in Coq</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2023/04/26/representation-of-rust-methods-in-coq"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Representation of Rust methods in Coq<!-- --> ¬ª</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-side-effects-in-rust" class="table-of-contents__link toc-highlight">ü¶Ä Side effects in Rust</a></li><li><a href="#-coq-a-purely-functional-language" class="table-of-contents__link toc-highlight">üêì Coq, a purely functional language</a></li><li><a href="#monads-in-coq" class="table-of-contents__link toc-highlight">üîÆ¬†Monads in Coq</a><ul><li><a href="#the-pure-operator" class="table-of-contents__link toc-highlight">The <code>Pure</code> operator</a></li><li><a href="#the-bind-operator" class="table-of-contents__link toc-highlight">The <code>Bind</code> operator</a></li></ul></li><li><a href="#-state-exceptions-non-termination-control-flow" class="table-of-contents__link toc-highlight">üöß State, exceptions, non-termination, control-flow</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Content</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/company/about">Company</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/company/claims">Claims</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/company/press">Press</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://twitter.com/LandFoobar" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://fr.linkedin.com/company/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Linkedin<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://t.me/formal_land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Telegram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.tiktok.com/@formal.land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>TikTok<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="mailto:contact@formal.land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Email<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitlab.com/formal-land" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitLab<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://formal-land.gitlab.io/coq-tezos-of-ocaml/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Coq Tezos of OCaml<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2024 Formal Land (Arae SARL) üê¶, Paris<br><em>Formal verification for everyday-life applications üèá</em><!-- Start of LiveChat (www.livechat.com) code -->
<script>window.__lc=window.__lc||{},window.__lc.license=14938650,function(n,t,c){function i(n){return e._h?e._h.apply(null,n):e._q.push(n)}var e={_q:[],_h:null,_v:"2.0",on:function(){i(["on",c.call(arguments)])},once:function(){i(["once",c.call(arguments)])},off:function(){i(["off",c.call(arguments)])},get:function(){if(!e._h)throw new Error("[LiveChatWidget] You can't use getters before load.");return i(["get",c.call(arguments)])},call:function(){i(["call",c.call(arguments)])},init:function(){var n=t.createElement("script");n.async=!0,n.type="text/javascript",n.src="https://cdn.livechatinc.com/tracking.js",t.head.appendChild(n)}};!n.__lc.asyncInit&&e.init(),n.LiveChatWidget=n.LiveChatWidget||e}(window,document,[].slice)</script>
<noscript><a href="https://www.livechat.com/chat-with/14938650/" rel="nofollow">Chat with us</a>, powered by <a href="https://www.livechat.com/?welcome" rel="noopener nofollow" target="_blank">LiveChat</a></noscript>
<!-- End of LiveChat code --></div></div></div></footer></div>
<script src="/assets/js/runtime~main.b3bf84ab.js"></script>
<script src="/assets/js/main.d84506b2.js"></script>
</body>
</html>